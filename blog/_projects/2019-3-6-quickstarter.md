---
date: 2019-3-6
tag:
  - android
  - launcher
  - search
  - app
author: PhilXu
location: Shanghai  
---

# android 快速搜索启动程序
## 开发背景
习惯了 Mac 端的 spotlight，就会在 windows 端寻找替代品，手机安装的 app 越来越多，也希望手机端的搜索能够方便快捷，无需按分类、盲目滑屏查找，而针对国内安卓手机的 launcher 普遍存在缺陷，这里面做的最好的是微软的 launcher， 但检索时优先检索网络内容，大多数情况只是想检索应用，并且不能设置，检索结果也有问题，比如“tb”无法检索到“手机淘宝”，甚至“hp”，无法检索到“虎扑”，总结起来有以下问题
- 只支持中文检索，打字慢
- 支持拼音，但不支持首字母
- 支持首字母，但要求从第一个字开始，很多应用你不会记得开头，比如“手机淘宝”
- 不支持任意字，有些奇葩名字“工银融e联”，只能记得有个“工商银行”的“工”字
- 按拼音检索要点击检索框，再切换英文输入法，多了好几个步骤

## 功能概述
快速启动应用列表，检索启动已安装的应用，切换正在运行的应用
## 程序亮点
- 手势启动，在任意页面启动
  - 上滑手机边缘，启动检索/切换
  - 右滑手机边缘，模拟 BACK 键
  - 长右滑手机边缘，切换上一应用
  - 下滑手机边缘，模拟 HOME 键
- 检索页直接显示自定义英文键盘，无需点击检索框，无需切换输入法
- 按拼音检索，支持应用名任意字母检索
  - 从第一字开始的首字母匹配最优先
  - 任意首字母其次
  - 任意字母优先级最低
- 沉底排列，适合单手操作
- 包含最近应用，方便切换，自带最近任务通常只能显示3个，不方便
- 默认应用程序列表按使用频率排序
- 添加扫一扫、付款码快捷方式
## 技术总结
- 创建悬浮窗服务FloatingService，在showFloatingWindow中添加触摸监听程序，根据时间和移动位置判断首饰
- 利用KeyboardView自定义键盘，自定义布局，及特殊按键
- 利用queryIntentActivities获取所有应用
- 利用多个正则表达式匹配检索
- 监听onConfigurationChanged，判断方向，横屏则隐藏悬浮窗，防止游戏误触
- 利用AccessibilityService监听屏幕切换，记录最近任务，记录使用频率
- 利用AccessibilityService模拟BACK、HOME键
- 利用静默通知常驻
## 演示动画
![](../_images/quickstarter/quickstarter.gif)



